:root{
  --bg: #0b0c10;
  --panel: #11131a;
  --panel-2: #161925;
  --text: #eaf0f6;
  --muted: #9aa3af;
  --accent: #4f46e5;
  --accent-2: #22c55e;
  --border: #223;
  --error: #ef4444;
  --radius: 12px;
  --font-size: 16px;
}
*{box-sizing:border-box}
html,body,#root{height:100%}
body{margin:0;background:var(--bg);color:var(--text);font:var(--font-size)/1.5 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif}
a{color:var(--muted)}
button{font:inherit}

/* Screen reader only content */
.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}

.app{min-height:100%;display:flex;flex-direction:column}
.header{position:sticky;top:0;z-index:10;display:flex;gap:20px;align-items:center;justify-content:space-between;padding:14px 20px;background:linear-gradient(180deg,rgba(0,0,0,.35),rgba(0,0,0,0));backdrop-filter:saturate(1.1) blur(6px);border-bottom:1px solid #1a1c24}
.brand{display:flex;align-items:center;gap:10px;font-weight:700;letter-spacing:.3px}
.logo{width:26px;height:26px;display:block}
.toggle{display:flex;gap:8px;align-items:center;color:var(--muted)}
.lang{display:flex;gap:8px;align-items:center}
select, textarea, input{background:var(--panel);border:1px solid var(--border);color:var(--text);border-radius:10px;padding:10px 12px}
textarea{width:100%;resize:vertical;font-size:var(--font-size);line-height:1.5;overflow-y:hidden;min-height:24px;max-height:300px;padding:8px 12px}
/* Ensure output typography matches textarea */
.output{font-size:var(--font-size);line-height:1.5;min-height:auto;max-height:400px;overflow-y:auto;padding:12px 14px}
input.custom-lang{width:220px}
.primary{background:var(--accent);border:1px solid #3d37b2;color:white;border-radius:10px;padding:10px 14px}
.secondary{background:var(--panel-2);border:1px solid var(--border);color:var(--text);border-radius:10px;padding:10px 14px}
.ghost{background:transparent;border:1px solid var(--border);color:var(--muted);border-radius:10px;padding:8px 10px}
.ghost.small{padding:6px 8px;font-size:14px}
.icon{background:transparent;border:0;color:inherit;padding:0 6px;cursor:pointer}
.primary:disabled,.secondary:disabled{opacity:.6}
.composer-header{margin-bottom:12px; display:flex;align-items:center;gap:8px;flex-wrap:nowrap}
.composer-header h2{margin:0;font-size:18px;font-weight:600;white-space:nowrap;flex:0 0 auto}
.result-header{display:flex;align-items:center;gap:8px;margin-bottom:12px}
.result-header h2{margin:0;font-size:18px;font-weight:600}
.result-header .spacer{flex:1}

.translate-controls{
  margin-top:10px;
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  align-items:center;
}

.language-buttons-row{
    display:flex;
    gap:8px;
    align-items:start;
    width:100%;
}

.language-btn{
  white-space:nowrap;
  flex-shrink:0;
}
.flag-img {
  width: 1.2em;
  height: 1.2em;
  vertical-align: text-bottom;
  margin-right: 6px;
  display: inline-block;
}

/* Spinner */
.spinner{
  display:inline-block;
  border-radius:50%;
  border:3px solid rgba(255,255,255,0.08);
  border-top-color:var(--accent-2);
  animation:spin 1s linear infinite;
  box-sizing:border-box;
}
@keyframes spin{to{transform:rotate(360deg)}}

/* Language pill: overlay spinner so width stays the same */
.pill{position:relative}
.pill .btn-spinner{display:none}
.pill.loading .btn-spinner{display:inline-flex;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);z-index:2}
/* hide visuals but preserve layout so width doesn't change */
.pill.loading .flag-img, .pill.loading .flag, .pill.loading .label{visibility:hidden}
/* keep same padding as normal to preserve width */
.pill.loading{padding:9px 12px;border-radius:999px}
/* make pill spinner very visible */
.pill.loading .spinner{border-top-color:var(--accent);}

/* Modal apply button: `.loading` class makes the button circular and shows spinner. Disabled buttons (empty input) only get reduced opacity */
.modal-actions button{position:relative}
.modal-actions button .btn-spinner{display:none}
.modal-actions button.loading .btn-spinner{display:inline-flex;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);z-index:2}
.modal-actions button.loading .modal-label{visibility:hidden}
.modal-actions button.loading{padding:6px;width:36px;height:36px;border-radius:50%;display:inline-flex;align-items:center;justify-content:center}
.modal-actions button.loading .spinner{border-width:3px;border-top-color:var(--accent-2)}

/* Modal Apply: more specific rules to ensure loading state overrides .primary defaults */
.modal-actions .primary.loading,
.modal-actions button.loading.primary {
  min-width:36px;
  width:36px;
  height:36px;
  padding:0;
  border-radius:50%;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  overflow:hidden;
}
.modal-actions .primary.loading .modal-label,
.modal-actions button.loading.primary .modal-label {
  opacity:0;
  pointer-events:none;
}
.modal-actions .primary.loading .btn-spinner,
.modal-actions button.loading.primary .btn-spinner{
  display:inline-flex;
  position:absolute;
  left:50%;
  top:50%;
  transform:translate(-50%,-50%);
  z-index:3;
}
.modal-actions .primary.loading .spinner,
.modal-actions button.loading.primary .spinner{
  border-width:3px;
  border-top-color:var(--accent-2);
}

/* Modal Apply: explicit loading state for primary button in modal actions */
.modal-actions .primary.loading,
.modal-actions button.primary.loading {
  box-sizing: border-box;
  width: 36px !important;
  height: 36px !important;
  min-width: 36px !important;
  padding: 0 !important;
  border-radius: 999px !important;
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
  position: relative !important;
  overflow: hidden !important;
}

/* Keep the label present in DOM (for accessibility) but hide visually */
.modal-actions .primary.loading .modal-label,
.modal-actions button.primary.loading .modal-label {
  position: relative;
  opacity: 0;
  width: 0;
  height: 0;
  overflow: hidden;
  pointer-events: none;
}

/* Show spinner centered inside the circular button */
.modal-actions .primary.loading .btn-spinner,
.modal-actions button.primary.loading .btn-spinner {
  display: inline-flex !important;
  position: absolute !important;
  left: 50% !important;
  top: 50% !important;
  transform: translate(-50%,-50%) !important;
  z-index: 4 !important;
}

.modal-actions .primary.loading .spinner,
.modal-actions button.primary.loading .spinner {
  width: 16px !important;
  height: 16px !important;
  border-width: 3px !important;
  border-top-color: var(--text) !important;
}

/* Ensure disabled but not loading buttons keep normal rectangular layout */
.modal-actions button[disabled]:not(.loading) {
  opacity: 0.6;
  padding: 10px 14px;
  min-width: 0;
  width: auto;
  height: auto;
  border-radius: 10px;
}

@media (max-width:768px){
  .language-buttons-row{
    overflow-x:auto;
    flex-wrap:nowrap;
    scrollbar-width:none;
    -ms-overflow-style:none;
  }
  .language-buttons-row::-webkit-scrollbar{
    display:none;
  }
}

@media (max-width:480px){
  .language-btn .flag{
    display:none;
  }
  .pill{
    padding:6px 10px;
    font-size:14px;
  }
}

.single-message-row{display:flex;gap:8px;align-items:start}
.single-actions{display:flex;flex-direction:column;gap:6px;align-items:center;padding-top:8px}

.messages{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:10px}
.message{display:block}
.message-row{display:flex;gap:8px;align-items:start}
.message-row textarea{flex:1}
.msg-actions{display:flex;flex-direction:column;gap:6px;align-items:center;padding-top:8px}
.index{display:inline-flex;align-items:center;justify-content:center;width:26px;height:26px;border-radius:8px;background:#1c1f2a;color:#b8c2cc;font-size:12px;border:1px solid var(--border)}

.output{margin-top:8px;padding:12px 14px;border-radius:12px;background:var(--panel);border:1px solid var(--border);transition:opacity .2s ease, filter .2s ease}
.detected-lang{margin-top:6px}
.muted{color:var(--muted)}

.error{position:fixed;right:18px;bottom:18px;background:#2a1414;border:1px solid #3a1a1a;color:#fecaca;padding:10px 12px;border-radius:10px;display:flex;align-items:center;gap:8px;box-shadow:0 8px 24px rgba(0,0,0,.4)}

.modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.5);display:flex;align-items:center;justify-content:center;padding:16px}
.modal{width:min(520px,100%);background:var(--panel);border:1px solid var(--border);border-radius:14px;padding:16px;box-shadow:0 20px 50px rgba(0,0,0,.5)}
.modal-input{width:100%;margin-top:8px}
.modal-actions{margin-top:12px;display:flex;gap:10px;justify-content:flex-end}

/* Remove empty state height adjustment - rely on min-height:auto */
.history{background:var(--panel-2);border:1px solid var(--border);border-radius:14px;padding:12px}
.history-toggle{display:flex;align-items:center;justify-content:space-between;width:100%;background:transparent;border:1px solid var(--border);color:var(--text);border-radius:10px;padding:10px 12px}
.history-list{list-style:none;margin:12px 0 0;padding:0;display:flex;flex-direction:column;gap:10px}
.history-item{background:var(--panel);border:1px solid var(--border);border-radius:var(--radius);padding:12px}
.history-item .row{display:flex;gap:8px;align-items:center;justify-content:space-between}
.badge{font-size:12px;padding:2px 8px;border-radius:999px;background:#1c1f2a;border:1px solid var(--border);color:#b8c2cc}
.time{color:var(--muted);font-size:12px}
.feedback{color:var(--muted);margin:6px 0}
.history .text{white-space:pre-wrap}

/* icon button */
.icon-btn{display:inline-flex;align-items:center;gap:8px;background:transparent;border:1px solid var(--border);color:var(--muted);border-radius:10px;padding:6px 8px;cursor:pointer}
.icon-btn:hover{color:var(--text);border-color:#2a2f3d}
.icon-label{display:none}

/* pill buttons for languages */
.lang-buttons{display:flex;flex-wrap:wrap;gap:8px}
.pill{background:var(--panel);border:1px solid var(--border);color:var(--text);padding:9px 12px;border-radius:999px;cursor:pointer}
.pill.active{background:var(--accent);border-color:#3d37b2;color:#fff}
.pill.loading{padding:6px;width:auto;height:36px;border-radius:50%;display:inline-flex;align-items:center;justify-content:center}
.pill.loading .flag-img, .pill.loading .flag{visibility:hidden}
.pill.loading .label{visibility:hidden}
.flag{margin-right:6px}
.dropdown{position:relative}
.menu{
    display: table;
    position:fixed;z-index:9999;top:auto;right:auto;min-width:220px;background:var(--panel);border:1px solid var(--border);border-radius:10px;padding:6px;box-shadow:0 10px 30px rgba(0,0,0,.5)}
.menu .menu-item{display:block;width:100%;text-align:left;background:transparent;border:0;color:var(--text);padding:8px;border-radius:8px}
.menu .menu-item:hover{background:#1b1f2a}
.menu .divider{height:1px;background:#222;margin:6px 2px}
.menu li{display: contents}
.translate-cta{display:inline-flex;align-items:center;gap:8px}

/* Single column layout for all screen sizes */
.content{
  max-width:1400px;
  min-width:70vw;
  width:100%;
  margin:22px auto 0 auto;
  flex:1;
  display:flex;
  flex-direction:column;
  gap:18px;
  padding:0 20px;
  box-sizing:border-box;
  overflow-x:hidden;
}

@media (max-width:1400px) {
  .content {
    max-width:100vw;
    min-width:unset;
    width:100vw;
    margin-left:0;
    margin-right:0;
    padding:0 12px;
  }
}

@media (max-width:900px) {
  .content {
    min-width: unset;
    width: 100%;
    max-width: 100vw;
    padding: 0 8px;
  }
}

.composer, .result{
  background:var(--panel-2);
  border:1px solid var(--border);
  border-radius:14px;
  padding:14px;
  height:fit-content;
}

@media (max-width:720px){
  .content{
    padding:0 16px;
  }
  .message{
    display:flex;
    flex-direction:column;
  }
  .msg-actions{
    flex-direction:row;
    align-items:center;
    justify-content:space-between;
  }
}

/* --- Overrides to ensure correct inline spinner and stable pill width --- */
.composer-header{flex-wrap:nowrap;align-items:center}
.composer-header h2{white-space:nowrap;flex:0 0 auto}
.lang-loading{display:inline-flex;align-items:center;gap:6px;color:var(--muted);margin-left:6px;flex:0 0 auto}

/* Base spinner: slightly thicker and high contrast by default */
.spinner{border:3px solid rgba(255,255,255,0.08);border-top-color:var(--text);}

/* Pill: overlay spinner without changing the pill's layout/width */
.pill{position:relative}
.pill .btn-spinner{display:none}
.pill.loading .btn-spinner{display:inline-flex;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);z-index:2}
/* hide visuals but preserve layout so width doesn't change */
.pill.loading .flag-img, .pill.loading .flag, .pill.loading .label{visibility:hidden}
/* keep same padding as normal to preserve width */
.pill.loading{padding:9px 12px;border-radius:999px}
/* make pill spinner very visible */
.pill.loading .spinner{border-top-color:var(--accent);}

/* Modal Apply: center spinner and keep button size stable */
.modal-actions button{position:relative}
.modal-actions button .btn-spinner{display:none}
.modal-actions button.loading .btn-spinner{display:inline-flex;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);z-index:2}
.modal-actions button.loading .modal-label{visibility:hidden}
.modal-actions button.loading{padding:6px;width:36px;height:36px;border-radius:50%;display:inline-flex;align-items:center;justify-content:center}

/* Modal Apply: more specific rules to ensure loading state overrides .primary defaults */
.modal-actions .primary.loading,
.modal-actions button.loading.primary {
  min-width:36px;
  width:36px;
  height:36px;
  padding:0;
  border-radius:50%;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  overflow:hidden;
}
.modal-actions .primary.loading .modal-label,
.modal-actions button.loading.primary .modal-label {
  opacity:0;
  pointer-events:none;
}
.modal-actions .primary.loading .btn-spinner,
.modal-actions button.loading.primary .btn-spinner{
  display:inline-flex;
  position:absolute;
  left:50%;
  top:50%;
  transform:translate(-50%,-50%);
  z-index:3;
}
.modal-actions .primary.loading .spinner,
.modal-actions button.loading.primary .spinner{
  border-width:3px;
  border-top-color:var(--accent-2);
}

/* Modal Apply: explicit loading state for primary button in modal actions */
.modal-actions .primary.loading,
.modal-actions button.primary.loading {
  box-sizing: border-box;
  width: 36px !important;
  height: 36px !important;
  min-width: 36px !important;
  padding: 0 !important;
  border-radius: 999px !important;
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
  position: relative !important;
  overflow: hidden !important;
}

/* Keep the label present in DOM (for accessibility) but hide visually */
.modal-actions .primary.loading .modal-label,
.modal-actions button.primary.loading .modal-label {
  position: relative;
  opacity: 0;
  width: 0;
  height: 0;
  overflow: hidden;
  pointer-events: none;
}

/* Show spinner centered inside the circular button */
.modal-actions .primary.loading .btn-spinner,
.modal-actions button.primary.loading .btn-spinner {
  display: inline-flex !important;
  position: absolute !important;
  left: 50% !important;
  top: 50% !important;
  transform: translate(-50%,-50%) !important;
  z-index: 4 !important;
}

.modal-actions .primary.loading .spinner,
.modal-actions button.primary.loading .spinner {
  width: 16px !important;
  height: 16px !important;
  border-width: 3px !important;
  border-top-color: var(--text) !important;
}

/* Ensure disabled but not loading buttons keep normal rectangular layout */
.modal-actions button[disabled]:not(.loading) {
  opacity: 0.6;
  padding: 10px 14px;
  min-width: 0;
  width: auto;
  height: auto;
  border-radius: 10px;
}

/* end overrides */
